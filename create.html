<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catifyy</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
 <link rel="stylesheet" href="create.css">
 <style>
   /* Cover upload enhancements */
   .cover-upload{
     cursor: pointer;
     transition: all 0.3s ease;
   }

   .cover-upload:hover{
     transform: scale(1.02);
   }

   .cover-upload.drag-over{
     background: color-mix(in srgb, var(--primary) 10%, var(--surface));
     border: 2px dashed var(--primary);
   }

   .cover-upload.has-image .cover-preview{
     opacity: 1;
   }

   .cover-preview{
     opacity: 0;
     transition: opacity 0.3s ease;
   }

   .cover-preview img{
     display: none;
     max-width: 100%;
     border-radius: 12px;
     margin: 12px auto;
     box-shadow: 0 4px 12px rgba(0,0,0,0.1);
   }

   /* Invite button states */
   .invite-btn{
     transition: all 0.2s ease;
   }

   .invite-btn.invited{
     background: color-mix(in srgb, #4caf50 20%, var(--surface)) !important;
     color: #4caf50;
     pointer-events: auto;
     cursor: pointer;
   }

   .invite-btn.invited:hover{
     background: color-mix(in srgb, #f44336 20%, var(--surface)) !important;
     color: #f44336;
   }

   .invite-btn.invited:hover::after{
     content: ' ‚úï';
   }

   /* Notification animations */
   @keyframes slideIn{
     from{
       transform: translateX(400px);
       opacity: 0;
     }
     to{
       transform: translateX(0);
       opacity: 1;
     }
   }

   @keyframes slideOut{
     from{
       transform: translateX(0);
       opacity: 1;
     }
     to{
       transform: translateX(400px);
       opacity: 0;
     }
   }

   /* File input hidden */
   #cover-photo{
     display: none;
   }
 </style>
</head>
<body>

  <header class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <img id="logo-img" src="./images/cat.png" height="100px" width="120px" alt="Catifyy Logo">
      </div>

      <div class="search-wrap">
        <form class="search" method="post">
          <i class="fa-solid fa-circle fa-xs" style="color: #000000;"></i>
          <input id="q" name="q" placeholder="Search songs, artists, albums..." />
        </form>

        <div class="filters">
          <div class="filter-group">
            <input type="radio" name="scope" id="f-songs" />
            <label class="chip" for="f-songs"><a href="songs.html">Songs</a></label>
            
            <input type="radio" name="scope" id="f-albums" />
            <label class="chip" for="f-albums"><a href="albums.html">Albums</a></label>
          
            <input type="radio" name="scope" id="f-library" />
            <label class="chip" for="f-library"><a href="library.html">Library</a></label>

            <input type="radio" name="scope" id="f-playlists" />
            <label class="chip" for="f-playlists"><a href="playlist.html">Playlist</a></label>
            
            <input type="radio" name="scope" id="f-liked" />
            <label class="chip" for="f-liked"><a href="liked.html">Liked</a></label>
          </div>
        </div>
      </div>

      <nav class="nav-links">
        <a href="index.html" title="Home"><i class="fa-solid fa-house-user"></i></a>
        <a href="create.html" title="Create Playlist"><i class="fa-solid fa-plus"></i></a>
        <button id="theme-toggle" class="nav-toggle" title="Toggle theme" aria-label="Toggle theme">
          <i id="theme-icon" class="fa-solid fa-moon"></i>
        </button>
        <a href="signup.html" title="Login"><i class="fa-solid fa-user"></i></a>
      </nav>
    </div>
  </header>

  <main class="container stack-32">
    
    <!-- Create playlist hero section -->
    <section class="create-hero">
      <h1>Create Your Playlist</h1>
      <p>Build the perfect music collection and collaborate with friends to create something amazing together.</p>
      
      <!-- Create options -->
      <div class="create-options">
        <button class="create-btn create-btn-primary">
          <i class="fa-solid fa-music"></i>
          Create Your Own Playlist
        </button>
        <button class="create-btn create-btn-accent">
          <i class="fa-solid fa-user-group"></i>
          Invite Friends to Collaborate
        </button>
      </div>
    </section>

    <!-- Playlist Details Form -->
    <section class="form-section">
      <h2 class="section-title">
        <i class="fa-solid fa-edit" style="color: var(--primary);"></i>
        Playlist Details
      </h2>
      
      <div class="form-group">
        <label class="form-label" for="playlist-name">Playlist Name</label>
        <input type="text" id="playlist-name" class="form-input" placeholder="Enter your playlist name..." />
      </div>

      <div class="form-group">
        <label class="form-label" for="playlist-description">Description (Optional)</label>
        <textarea id="playlist-description" class="form-input form-textarea" placeholder="Describe your playlist..."></textarea>
      </div>

      <div class="form-group">
        <label class="form-label">Cover Photo</label>
        <div class="cover-upload">
          <input type="file" id="cover-photo" accept="image/*" />
          <div class="cover-preview">
            <img src="" alt="Playlist cover preview" />
          </div>
          <p><strong>Click to upload</strong> or drag and drop</p>
          <p style="font-size: 14px; opacity: 0.7;">PNG, JPG up to 5MB</p>
        </div>
      </div>
    </section>

    <!-- Add Songs/Albums -->
    <section class="form-section">
      <h2 class="section-title">
        <i class="fa-solid fa-plus-circle" style="color: var(--primary);"></i>
        Add Music
      </h2>
      
      <div class="form-group">
        <label class="form-label" for="music-search">Search Songs or Albums</label>
        <input type="text" id="music-search" class="form-input" placeholder="Search for songs, albums, or artists..." />
      </div>

      <div class="search-results">
        <div class="search-item">
          <img src="./images/gul.jpg" alt="Song artwork" />
          <div class="search-item-info">
            <h4>Gul</h4>
            <p>Anuv Jain</p>
          </div>
          <button class="add-btn">
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>

       

        <div class="search-item">
          <img src="./images/alagasman.jpg" alt="Punjabi song artwork" />
          <div class="search-item-info">
            <h4>Alag Asman </h4>
            <p>Anuv Jain</p>
          </div>
          <button class="add-btn">
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>

        <div class="search-item">
          <img src="./images/kesariya.jpg" alt="Hindi song artwork" />
          <div class="search-item-info">
            <h4>Kesariya</h4>
            <p>Arijit Singh ‚Ä¢ Brahmastra</p>
          </div>
          <button class="add-btn">
            <i class="fa-solid fa-plus"></i>
          </button>
        </div>
      </div>

      <div class="selected-items">
        <div class="selected-item">
          <img src="./images/shapeofu.jpg" alt="Selected song" />
          <div class="search-item-info">
            <h4>Shape of You</h4>
            <p>Ed Sheeran</p>
          </div>
          <button class="remove-btn">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>

        <div class="selected-item">
          <img src="./images/water.jpg" alt="Selected album" />
          <div class="search-item-info">
            <h4>Water</h4>
            <p>Diljit Dosanjh</p>
          </div>
          <button class="remove-btn">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
      </div>
    </section>

    <!-- Invite Friends -->
    <section class="form-section">
      <h2 class="section-title">
        <i class="fa-solid fa-user-plus" style="color: var(--accent);"></i>
        Invite Friends to Collaborate
      </h2>
      
      <div class="form-group">
        <label class="form-label" for="friend-search">Search Friends</label>
        <input type="text" id="friend-search" class="form-input" placeholder="Search by name or email..." />
      </div>

      <div class="friend-item">
        <div class="friend-avatar">AM</div>
        <div class="friend-info">
          <h4>Alex Morgan</h4>
          <p>alex.morgan@email.com</p>
        </div>
        <button class="invite-btn">Invite</button>
      </div>

      <div class="friend-item">
        <div class="friend-avatar">JS</div>
        <div class="friend-info">
          <h4>Jordan Smith</h4>
          <p>jordan.smith@email.com</p>
        </div>
        <button class="invite-btn invited">Invited</button>
      </div>

      <div class="friend-item">
        <div class="friend-avatar">SP</div>
        <div class="friend-info">
          <h4>Samantha Patel</h4>
          <p>sam.patel@email.com</p>
        </div>
        <button class="invite-btn">Invite</button>
      </div>

      <div class="friend-item">
        <div class="friend-avatar">MK</div>
        <div class="friend-info">
          <h4>Michael Kim</h4>
          <p>michael.kim@email.com</p>
        </div>
        <button class="invite-btn">Invite</button>
      </div>
    </section>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="action-btn action-btn-primary">
        <i class="fa-solid fa-save"></i>
        Create Playlist
      </button>
      <button class="action-btn action-btn-secondary">
        <i class="fa-solid fa-times"></i>
        Cancel
      </button>
    </div>

  </main>

  <footer>
    <div class="container footer-grid">
      <div class="footer-links">
        <a href="#">About</a>
        <a href="#">Help</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms</a>
      </div>
      <div class="social" aria-label="Social media">
        <a href="#" aria-label="Twitter">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 4h3l5 7l5-7h3l-7.5 10L20 20h-3l-5-7l-5 7H4l7.5-10z"/></svg>
        </a>
        <a href="#" aria-label="Instagram">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm5 3a5 5 0 1 1 0 10a5 5 0 0 1 0-10m0 2.2A2.8 2.8 0 1 0 14.8 12A2.8 2.8 0 0 0 12 9.2M18 6.5a1 1 0 1 1-1 1a1 1 0 0 1 1-1"/></svg>
        </a>
        <a href="#" aria-label="YouTube">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M10 15V9l5 3m8-6.5v9A3.5 3.5 0 0 1 19.5 18h-15A3.5 3.5 0 0 1 1 14.5v-9A3.5 3.5 0 0 1 4.5 2h15A3.5 3.5 0 0 1 23 5.5"/></svg>
        </a>
      </div>
    </div>
  </footer>

  <script>
    // Get playlists from localStorage
    function getPlaylists(){
      const playlists = localStorage.getItem('catifyy_playlists');
      return playlists ? JSON.parse(playlists) : [];
    }

    function savePlaylists(playlistsArray){
      localStorage.setItem('catifyy_playlists', JSON.stringify(playlistsArray));
    }

    // Track selected songs
    let selectedSongs = [
      {
        title: 'Shape of You',
        artist: 'Ed Sheeran',
        artwork: './images/shapeofu.jpg'
      },
      {
        title: 'Water',
        artist: 'Diljit Dosanjh',
        artwork: './images/water.jpg'
      }
    ];

    // Update selected songs display
    function updateSelectedSongs(){
      const container = document.querySelector('.selected-items');
      container.innerHTML = '';
      
      selectedSongs.forEach((song, index) => {
        const div = document.createElement('div');
        div.className = 'selected-item';
        div.innerHTML = `
          <img src="${song.artwork}" alt="${song.title}" />
          <div class="search-item-info">
            <h4>${song.title}</h4>
            <p>${song.artist}</p>
          </div>
          <button class="remove-btn" data-index="${index}">
            <i class="fa-solid fa-times"></i>
          </button>
        `;
        container.appendChild(div);
      });

      // Add remove functionality
      document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const index = parseInt(btn.dataset.index);
          selectedSongs.splice(index, 1);
          updateSelectedSongs();
        });
      });
    }

    // All available songs database (you can expand this)
    const availableSongs = [
      { title: 'Gul', artist: 'Anuv Jain', artwork: './images/gul.jpg' },
      { title: 'Alag Asman', artist: 'Anuv Jain', artwork: './images/alagasman.jpg' },
      { title: 'Kesariya', artist: 'Arijit Singh', artwork: './images/kesariya.jpg' },
      { title: 'Shape of You', artist: 'Ed Sheeran', artwork: './images/shapeofu.jpg' },
      { title: 'Water', artist: 'Diljit Dosanjh', artwork: './images/water.jpg' },
      { title: 'Softly', artist: 'Karan Aujla', artwork: './images/softly.jpg' },
      { title: 'Tension', artist: 'Diljit Dosanjh', artwork: './images/tension.jpg' },
      { title: 'For a Reason', artist: 'Nick Jonas', artwork: './images/forareason.jpg' },
      { title: 'Die With a Smile', artist: 'Lady Gaga, Bruno Mars', artwork: './images/diewithasmile.jpg' }
    ];

    // Search functionality
    const searchInput = document.getElementById('music-search');
    const searchResults = document.querySelector('.search-results');

    function displaySearchResults(songs){
      searchResults.innerHTML = '';
      
      if(songs.length === 0){
        searchResults.innerHTML = '<p style="padding: 20px; text-align: center; opacity: 0.6;">No songs found. Try a different search term.</p>';
        return;
      }

      songs.forEach(song => {
        const div = document.createElement('div');
        div.className = 'search-item';
        div.innerHTML = `
          <img src="${song.artwork}" alt="${song.title}" />
          <div class="search-item-info">
            <h4>${song.title}</h4>
            <p>${song.artist}</p>
          </div>
          <button class="add-btn">
            <i class="fa-solid fa-plus"></i>
          </button>
        `;
        searchResults.appendChild(div);

        // Add click handler to add button
        const addBtn = div.querySelector('.add-btn');
        addBtn.addEventListener('click', () => {
          // Check if already added
          const exists = selectedSongs.some(s => s.title === song.title && s.artist === song.artist);
          if(!exists){
            selectedSongs.push({ ...song });
            updateSelectedSongs();
            
            // Visual feedback
            addBtn.innerHTML = '<i class="fa-solid fa-check"></i>';
            addBtn.style.background = '#4caf50';
            setTimeout(() => {
              addBtn.innerHTML = '<i class="fa-solid fa-plus"></i>';
              addBtn.style.background = '';
            }, 1000);
          } else {
            // Already added
            addBtn.innerHTML = '<i class="fa-solid fa-check"></i>';
            addBtn.style.background = '#ff9800';
            setTimeout(() => {
              addBtn.innerHTML = '<i class="fa-solid fa-plus"></i>';
              addBtn.style.background = '';
            }, 1000);
          }
        });
      });
    }

    // Search as user types
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase().trim();
      
      if(searchTerm === ''){
        // Show all songs when search is empty
        displaySearchResults(availableSongs);
        return;
      }

      // Filter songs by title or artist
      const filteredSongs = availableSongs.filter(song => 
        song.title.toLowerCase().includes(searchTerm) ||
        song.artist.toLowerCase().includes(searchTerm)
      );

      displaySearchResults(filteredSongs);
    });

    // Initialize with all songs
    displaySearchResults(availableSongs);

    // Add song to selection (for initial songs)
    document.querySelectorAll('.search-results .add-btn').forEach((btn, index) => {
      btn.addEventListener('click', () => {
        const item = btn.closest('.search-item');
        const title = item.querySelector('h4').textContent;
        const artist = item.querySelector('p').textContent;
        const artwork = item.querySelector('img').src;
        
        // Check if already added
        const exists = selectedSongs.some(s => s.title === title && s.artist === artist);
        if(!exists){
          selectedSongs.push({ title, artist, artwork });
          updateSelectedSongs();
          
          // Visual feedback
          btn.innerHTML = '<i class="fa-solid fa-check"></i>';
          btn.style.background = '#4caf50';
          setTimeout(() => {
            btn.innerHTML = '<i class="fa-solid fa-plus"></i>';
            btn.style.background = '';
          }, 1000);
        }
      });
    });

    // Cover photo upload functionality
    const coverInput = document.getElementById('cover-photo');
    const coverPreview = document.querySelector('.cover-preview img');
    const coverUploadDiv = document.querySelector('.cover-upload');
    
    // Make entire div clickable
    coverUploadDiv.addEventListener('click', () => {
      coverInput.click();
    });

    // Prevent click event from bubbling when clicking input
    coverInput.addEventListener('click', (e) => {
      e.stopPropagation();
    });
    
    // Handle file selection
    coverInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if(file){
        // Check file size (5MB limit)
        if(file.size > 5 * 1024 * 1024){
          alert('File size must be less than 5MB!');
          return;
        }

        // Check file type
        if(!file.type.match('image.*')){
          alert('Please select an image file (PNG, JPG, etc.)');
          return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
          coverPreview.src = e.target.result;
          coverPreview.style.display = 'block';
          coverUploadDiv.classList.add('has-image');
          console.log('‚úÖ Cover image uploaded');
        };
        reader.readAsDataURL(file);
      }
    });

    // Drag and drop functionality
    coverUploadDiv.addEventListener('dragover', (e) => {
      e.preventDefault();
      e.stopPropagation();
      coverUploadDiv.classList.add('drag-over');
    });

    coverUploadDiv.addEventListener('dragleave', (e) => {
      e.preventDefault();
      e.stopPropagation();
      coverUploadDiv.classList.remove('drag-over');
    });

    coverUploadDiv.addEventListener('drop', (e) => {
      e.preventDefault();
      e.stopPropagation();
      coverUploadDiv.classList.remove('drag-over');
      
      const files = e.dataTransfer.files;
      if(files.length > 0){
        const file = files[0];
        
        // Check file size
        if(file.size > 5 * 1024 * 1024){
          alert('File size must be less than 5MB!');
          return;
        }

        // Check file type
        if(!file.type.match('image.*')){
          alert('Please drop an image file (PNG, JPG, etc.)');
          return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
          coverPreview.src = e.target.result;
          coverPreview.style.display = 'block';
          coverUploadDiv.classList.add('has-image');
          console.log('‚úÖ Cover image dropped');
        };
        reader.readAsDataURL(file);
      }
    });

    // Invite friends functionality
    document.querySelectorAll('.invite-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        if(btn.classList.contains('invited')){
          // Uninvite
          btn.classList.remove('invited');
          btn.textContent = 'Invite';
          console.log('‚ùå Uninvited friend');
        } else {
          // Invite
          btn.classList.add('invited');
          btn.textContent = 'Invited';
          
          // Get friend name
          const friendName = btn.closest('.friend-item').querySelector('h4').textContent;
          console.log('‚úÖ Invited:', friendName);
          
          // Show notification
          const notification = document.createElement('div');
          notification.style.cssText = `
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--surface);
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 8px 8px 24px var(--shadow-dark), -8px -8px 24px var(--shadow-light);
            z-index: 1000;
            animation: slideIn 0.3s ease;
          `;
          notification.innerHTML = `
            <div style="display: flex; align-items: center; gap: 12px;">
              <i class="fa-solid fa-check-circle" style="color: #4caf50; font-size: 20px;"></i>
              <span><strong>${friendName}</strong> has been invited!</span>
            </div>
          `;
          document.body.appendChild(notification);
          
          setTimeout(() => {
            notification.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => notification.remove(), 300);
          }, 2000);
        }
      });
    });

    // Create Playlist button
    document.querySelector('.action-btn-primary').addEventListener('click', () => {
      const nameInput = document.getElementById('playlist-name');
      const descInput = document.getElementById('playlist-description');
      
      const name = nameInput.value.trim();
      const description = descInput.value.trim();
      
      if(!name){
        alert('Please enter a playlist name!');
        nameInput.focus();
        return;
      }

      if(selectedSongs.length === 0){
        alert('Please add at least one song to your playlist!');
        return;
      }

      // Get invited friends
      const invitedFriends = [];
      document.querySelectorAll('.invite-btn.invited').forEach(btn => {
        const friendItem = btn.closest('.friend-item');
        const friendName = friendItem.querySelector('h4').textContent;
        const friendEmail = friendItem.querySelector('p').textContent;
        invitedFriends.push({ name: friendName, email: friendEmail });
      });

      // Create playlist object
      const playlist = {
        id: Date.now(),
        name: name,
        description: description || 'No description',
        cover: coverPreview.src || './images/cat.png',
        songs: [...selectedSongs],
        collaborators: invitedFriends,
        createdAt: new Date().toISOString(),
        songCount: selectedSongs.length
      };

      // Save to localStorage
      const playlists = getPlaylists();
      playlists.push(playlist);
      savePlaylists(playlists);

      console.log('‚úÖ Playlist created:', playlist.name);
      if(invitedFriends.length > 0){
        console.log('üë• Collaborators:', invitedFriends.map(f => f.name).join(', '));
      }
      
      // Show success message
      let message = `Playlist "${name}" created successfully with ${selectedSongs.length} songs!`;
      if(invitedFriends.length > 0){
        message += `\n\n${invitedFriends.length} friend${invitedFriends.length > 1 ? 's' : ''} invited to collaborate!`;
      }
      alert(message);
      
      // Redirect to playlist page
      window.location.href = 'playlist.html';
    });

    // Cancel button
    document.querySelector('.action-btn-secondary').addEventListener('click', () => {
      if(confirm('Are you sure you want to cancel? All changes will be lost.')){
        window.location.href = 'playlist.html';
      }
    });

    // Initialize
    updateSelectedSongs();
  </script>
  <!-- Theme script -->
  <script src="theme.js"></script>
</body>
</html>

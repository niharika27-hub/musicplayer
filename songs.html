<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catify</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root{
      /* 5-color palette (exactly) */
      --bg: #eaf1ff;           /* soft pastel blue background */
      --surface: #f6f8ff;      /* elevated surfaces */
      --text: #2d3348;         /* primary text (dark slate) */
      --primary: #6e85ff;      /* blue accent for actions */
      --accent: #ff8db1;       /* soft pink accent */

      /* neumorphic shadows derived from background tone */
      --shadow-dark: #ccd6ec;
      --shadow-light: #ffffff;
      --radius: 18px;
    }

    /* Reset + base */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
      line-height: 1.55;
    }
    img{ max-width: 100%; display: block; }
    a{ color: inherit; text-decoration: none; }
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }

    .container{ max-width: 1200px;
       margin: 0 auto;
        padding: 20px;
       }
    .stack-24{ display:grid;
      gap:24px;
       }
    .stack-32{ 
      display:grid;
      gap:32px; 
      }

    /* Neumorphism helpers */
    .neu{
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: 12px 12px 28px var(--shadow-dark), -12px -12px 28px var(--shadow-light);
    }
    .neu-inset{
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: inset 8px 8px 16px var(--shadow-dark), inset -8px -8px 16px var(--shadow-light);
    }
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px; padding:12px 18px; border-radius: 999px;
      background: var(--surface);
      box-shadow: 8px 8px 18px var(--shadow-dark), -8px -8px 18px var(--shadow-light);
      border: 0; color: var(--text); cursor: pointer; transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{
      box-shadow: inset 8px 8px 16px var(--shadow-dark), inset -8px -8px 16px var(--shadow-light);
      transform: translateY(0);
    }
    .btn-primary{
      color: white;
      background: radial-gradient(120% 120% at 30% 20%, var(--primary) 0%, #5e73ff 60%, #5b6bff 100%);
    }
    .chip{
      padding:8px 14px; border-radius:999px;
      background: var(--surface);
      box-shadow: 6px 6px 14px var(--shadow-dark), -6px -6px 14px var(--shadow-light);
      transition: background .2s ease, color .2s ease, box-shadow .2s ease;
      cursor: pointer; white-space: nowrap;
    }
    .chip[data-active="true"]{
      background: linear-gradient(145deg, var(--primary), #7e97ff);
      color: #fff;
      box-shadow: 8px 8px 18px rgba(110,133,255,.35), -8px -8px 18px #fff;
    }

    #songSearchStatus{
      display: none;
      margin-bottom: 24px;
      padding: 16px 20px;
      border-radius: var(--radius);
      background: var(--surface);
      box-shadow: 6px 6px 14px var(--shadow-dark), -6px -6px 14px var(--shadow-light);
      color: var(--text);
      font-size: 0.95rem;
    }

    #songSearchStatus strong{
      color: var(--primary);
    }

    #songSearchStatus span{
      font-weight: 600;
    }

    #songSearchStatus[data-state="empty"]{
      opacity: 0.8;
    }

    #songSearchReference{
      display: none;
      margin: -12px 0 24px;
      padding: 0 20px 20px;
      background: transparent;
      color: var(--text);
    }

    #songSearchReference ul{
      list-style: none;
      margin: 12px 0 0;
      padding: 0;
      display: grid;
      gap: 10px;
    }

    #songSearchReference li{
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 12px;
      align-items: start;
      padding: 12px 16px;
      border-radius: var(--radius);
      background: var(--surface);
      box-shadow: 4px 4px 10px var(--shadow-dark), -4px -4px 10px var(--shadow-light);
      transition: transform 0.15s ease;
    }

    #songSearchReference li:hover{
      transform: translateY(-2px);
    }

    #songSearchReference .result-index{
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: linear-gradient(145deg, var(--primary), #7e97ff);
      color: #fff;
      font-size: 0.85rem;
      display: grid;
      place-items: center;
      font-weight: 600;
    }

    #songSearchReference .result-meta{
      display: grid;
      gap: 4px;
    }

    #songSearchReference .result-title{
      font-weight: 600;
      color: var(--primary);
    }

    #songSearchReference .result-artist{
      font-size: 0.9rem;
      color: var(--text-secondary, color-mix(in srgb, var(--text) 60%, transparent));
    }

    #songSearchReference .result-album{
      font-size: 0.85rem;
      color: var(--text-secondary, color-mix(in srgb, var(--text) 50%, transparent));
    }

    /* Navigation */
    header.nav{
      position: sticky; 
      top: 0; 
      z-index: 5;
      background: var(--surface);
      border-bottom: 1px solid color-mix(in srgb, var(--text) 15%, transparent);
      box-shadow: 0 4px 12px var(--shadow-dark);
    }
    
    .nav-inner{ 
      display: flex;
      align-items: center;
      justify-content: space-between; 
      gap: 20px; 
      padding: 14px 0;
    }

    header.nav .container{
      padding: 0 32px 0 16px;
      margin: 0;
      max-width: 100%;
      width: 100%;
    }

    .brand{
      flex-shrink: 0;
      display: flex;
      align-items: center;
      margin-right: 16px;
      padding-left: 0;
    }

    .brand img{
      display: block;
    }
   
    .nav-links{
      display:flex;
      align-items:center;
      gap:24px;
      font-size: 2rem;
      flex-shrink:0;
      margin-left:auto;
    }

    .nav-links a,
    .nav-links button{
      display:flex;
      align-items:center;
      justify-content:center;
      color: var(--primary);
      transition: opacity .2s ease;
    }

    .nav-links a:hover,
    .nav-links button:hover{
      opacity:.85;
    }

    .nav-links button{
      background: transparent;
      border: 0;
      padding: 0;
      cursor: pointer;
      font-size: inherit;
    }

    .nav-links button:focus-visible{
      outline: 2px solid var(--primary);
      outline-offset: 4px;
    }

    .nav-links i{
      color: inherit;
    }

    .nav-links a:focus{
      outline: none;
    }

    .nav-links a:focus-visible{
      outline: 2px solid var(--primary);
      outline-offset: 4px;
    }

    /* Search with filters */
    .search-wrap{ 
        flex: 1 1 700px;
        display:flex;
        gap: 20px;
        align-items:center; 
        justify-content:center; 
    }
    .search{ 
      width: 100px;
         flex:1;
         display:flex; 
         align-items:center;
         gap:10px; 
         padding:10px 16px; 
         border-radius:999px; 
         background:var(--surface);
         box-shadow: inset 6px 6px 12px var(--shadow-dark);
    }
    .search input{
      flex:1; border:0; outline:0; background:transparent; color:var(--text); font-size:14px;
    }
    .filters{ display:flex; gap:18px; overflow:auto; }
    .filters a{ color: inherit; }
    

    /* Section headings */
    .section h2{ font-size: clamp(18px, 2.5vw, 22px); margin:0 0 12px; }
    .muted{ opacity:.75; }

    /* Language category chips */
    .category-filters{
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 24px;
      justify-content: center;
    }
    
    .category-chip{
      padding: 10px 20px;
      border-radius: 999px;
      background: var(--surface);
      box-shadow: 8px 8px 18px var(--shadow-dark), -8px -8px 18px var(--shadow-light);
      transition: all .2s ease;
      cursor: pointer;
      font-weight: 500;
    }
    
    .category-chip:hover,
    .category-chip.active{
      background: linear-gradient(145deg, var(--primary), #7e97ff);
      color: #fff;
      transform: translateY(-1px);
    }

    /* Hero section for songs page */
    .songs-hero{
      text-align: center;
      padding: 40px 20px;
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: 12px 12px 28px var(--shadow-dark), -12px -12px 28px var(--shadow-light);
      margin-bottom: 32px;
    }
    
    .songs-hero h1{
      font-size: clamp(28px, 4vw, 36px);
      margin: 0 0 12px;
      font-weight: 700;
    }
    
    .songs-hero p{
      opacity: .8;
      font-size: 16px;
      max-width: 500px;
      margin: 0 auto;
    }

    /* Song list styling */
    .song-list{
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: 12px 12px 28px var(--shadow-dark), -12px -12px 28px var(--shadow-light);
      overflow: hidden;
    }

    .song-item{
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      border-bottom: 1px solid color-mix(in srgb, var(--bg) 70%, #aab7d8);
      transition: all .2s ease;
      cursor: pointer;
      position: relative;
    }

    .song-item:last-child{
      border-bottom: none;
    }

    .song-item:hover{
      background: color-mix(in srgb, var(--primary) 8%, var(--surface));
      transform: translateX(4px);
    }

    .song-number{
      width: 24px;
      text-align: center;
      font-weight: 600;
      opacity: .7;
      font-size: 14px;
    }

    .song-artwork{
      width: 48px;
      height: 48px;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    .song-artwork img{
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .song-info{
      flex: 1;
      min-width: 0;
    }

    .song-title{
      font-weight: 600;
      margin: 0 0 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .song-artist{
      opacity: .7;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .song-album{
      opacity: .6;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      min-width: 120px;
    }

    .song-duration{
      opacity: .7;
      font-size: 14px;
      min-width: 40px;
      text-align: right;
    }

    .song-play-btn{
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: radial-gradient(120% 120% at 35% 25%, var(--primary) 0%, #5f74ff 60%);
      color: white;
      border: 0;
      cursor: pointer;
      display: grid;
      place-items: center;
      opacity: 0;
      transform: scale(0.8);
      transition: all .2s ease;
      box-shadow: 6px 6px 12px rgba(110,133,255,.25);
    }

    .song-item:hover .song-play-btn{
      opacity: 1;
      transform: scale(1);
    }

    .song-item:hover .song-number{
      opacity: 0;
    }

    /* Grid layout for larger screens */
    @media (min-width: 768px) {
      .song-item{
        display: grid;
        grid-template-columns: 40px 60px 1fr 200px 80px 40px;
        gap: 16px;
        align-items: center;
      }
      
      .song-info{
        display: grid;
        grid-template-columns: 1fr;
        gap: 4px;
      }
    }

    /* Footer */
    footer{
      margin-top: 28px; padding: 20px 0 36px; opacity:.9;
      border-top: 1px solid color-mix(in srgb, var(--bg) 70%, #aab7d8);
    }
    .footer-grid{
      display:grid; gap:16px; grid-template-columns: 1fr; align-items:center;
    }
    .footer-links, .social{ display:flex; flex-wrap:wrap; gap:14px; align-items:center; }
    .social a{
      width:38px; height:38px; border-radius:50%; display:grid; place-items:center;
      background: var(--surface);
      box-shadow: 6px 6px 12px var(--shadow-dark), -6px -6px 12px var(--shadow-light);
    }

    .filter-group{ display:flex; gap:8px; }
    .filter-group input{ display:none; }
    .filter-group label{ user-select:none; }
    .filter-group input:checked + label{ background: linear-gradient(145deg, var(--primary), #7e97ff); color:#fff; }
  </style>
</head>
<body>

  <header class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <img id="logo-img" src="./images/cat.png" height="100px" width="120px" alt="Catifyy Logo">
      </div>

      <div class="search-wrap">
        <form class="search" method="post">
          <i class="fa-solid fa-circle fa-xs" style="color: #000000;"></i>
          <input id="q" name="q" placeholder="Search songs, artists, albums..." />
        </form>
        <div class="filters">
          <div class="filter-group">
            <input type="radio" name="scope" id="f-songs" checked />
            <label class="chip" for="f-songs" data-active="true">Songs</label>
            
            <input type="radio" name="scope" id="f-albums" />
            <label class="chip" for="f-albums"><a href="albums.html">Albums</a></label>
          
            <input type="radio" name="scope" id="f-library" />
            <label class="chip" for="f-library"><a href="library.html">Library</a></label>

            <input type="radio" name="scope" id="f-playlists" />
            <label class="chip" for="f-playlists"><a href="playlist.html">Playlist</a></label>
            
            <input type="radio" name="scope" id="f-liked" />
            <label class="chip" for="f-liked"><a href="liked.html">Liked</a></label>
          </div>
        </div>
      </div>

      <nav class="nav-links">
        <a href="index.html" title="Home"><i class="fa-solid fa-house-user"></i></a>
        <a href="create.html" title="Create Playlist"><i class="fa-solid fa-plus"></i></a>
        <button id="theme-toggle" class="nav-toggle" title="Toggle theme" aria-label="Toggle theme">
          <i id="theme-icon" class="fa-solid fa-moon"></i>
        </button>
        <a href="signup.html" title="Login"><i class="fa-solid fa-user"></i></a>
      </nav>
    </div>
  </header>

  <main class="container stack-32">
    
    <!-- Songs hero section -->
    <section class="songs-hero">
      <h1>Discover Songs</h1>
      <p>Explore millions of songs from different languages and genres. Find your next favorite track from our vast music library.</p>
      
      <!-- Language options in discover songs section -->
      <div class="category-filters" style="margin-top: 24px;">
        <div class="category-chip active">All Languages</div>
        <div class="category-chip">Punjabi</div>
        <div class="category-chip">Hindi</div>
        <div class="category-chip">English</div>
        <div class="category-chip">Haryanvi</div>
        <div class="category-chip">Tamil</div>
        <div class="category-chip">Telugu</div>
        <div class="category-chip">Marathi</div>
        <div class="category-chip">Bengali</div>
        <div class="category-chip">Gujarati</div>
      </div>
    </section>
    <section class="section">
      <h2>Recently Played</h2>
      <div class="song-list">
        <div class="song-item" data-src="audio/lagjagale.mp3">
          <div class="song-number">1</div>
          <div class="song-artwork">
            <img src="./images/lataalbum.jpg" alt="Lata album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Lag Jaa Gale</div>
            <div class="song-artist">Lata Mangeshkar</div>
          </div>
          <div class="song-album">Remembering Lata Mangeshkar</div>
          <div class="song-duration">4:15</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/pardesiya.mp3">
          <div class="song-number">2</div>
          <div class="song-artwork">
            <img src="./images/paramsundri.jpg" alt="Party album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Pardesiya</div>
            <div class="song-artist">Sachin-Jigar, Sonu Nigam, Krishnakali</div>
          </div>
          <div class="song-album">Param Sundari</div>
          <div class="song-duration">3:28</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/saiyyan.mp3">
          <div class="song-number">3</div>
          <div class="song-artwork">
            <img src="./images/saiyyan.jpg" alt="Spiritual album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">saiyyan</div>
            <div class="song-artist">Kailash Kher</div>
          </div>
          <div class="song-album">Best of Kailash Kher</div>
          <div class="song-duration">6:22</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>
      </div>
    </section>

    <!-- Popular Songs Section -->
    <section class="section">
      <h2>Popular Songs</h2>
      <div class="song-list">
        <div class="song-item" data-src="audio/forareason.mp3">
          <div class="song-number">1</div>
          <div class="song-artwork">
            <img src="./images/popculture.jpg" alt="popculture album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">For a Reason</div>
            <div class="song-artist">Karan Aujla</div>
          </div>
          <div class="song-album">P-POP Culture</div>
          <div class="song-duration">3:24</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/diewithasmile.mp3">
          <div class="song-number">2</div>
          <div class="song-artwork">
            <img src="./images/diewithasmile.jpg" alt="Die With A Smile album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Die With A Smile</div>
            <div class="song-artist">Lady Gaga & Bruno Mars</div>
          </div>
          <div class="song-album">Die With A Smile</div>
          <div class="song-duration">4:11</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/badtameezdil.mp3">
          <div class="song-number">3</div>
          <div class="song-artwork">
            <img src="./images/yjhd.jpg" alt="Badtameez Dil album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Badtameez Dil</div>
            <div class="song-artist">Benny Dayal</div>
          </div>
          <div class="song-album">Yeh Jawaani Hai Deewani</div>
          <div class="song-duration">4:32</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/superstar.mp3">
          <div class="song-number">4</div>
          <div class="song-artwork">
            <img src="./images/one.jpg" alt="One from the crowd album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Superstar</div>
            <div class="song-artist">DOX</div>
          </div>
          <div class="song-album">One from the crowd</div>
          <div class="song-duration">3:18</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/perfect.mp3">
          <div class="song-number">5</div>
          <div class="song-artwork">
            <img src="./images/perfect.jpg" alt="Perfect album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Perfect</div>
            <div class="song-artist">Ed Sheeran</div>
          </div>
          <div class="song-album">÷ (Divide)</div>
          <div class="song-duration">4:23</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>
      </div>
    </section>

    <!-- Punjabi Songs Section -->
    <section class="section">
      <h2> Punjabi Songs</h2>
      <div class="song-list">
        <div class="song-item" data-src="audio/forareason.mp3">
          <div class="song-number">1</div>
          <div class="song-artwork">
            <img src="./images/popculture.jpg" alt="Softly album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">For a Reason</div>
            <div class="song-artist">Karan Aujla</div>
          </div>
          <div class="song-album">P-POP Culture</div>
          <div class="song-duration">3:24</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/ishqjehahogya.mp3">
          <div class="song-number">2</div>
          <div class="song-artwork">
            <img src="./images/Aforarjan2.jpg" alt="Arjan album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Ishq Jeha Ho Gya</div>
            <div class="song-artist">Arjan Dhillon</div>
          </div>
          <div class="song-album">A for Arjan2</div>
          <div class="song-duration">3:45</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/timeless.mp3">
          <div class="song-number">3</div>
          <div class="song-artwork">
            <img src="./images/timeless.jpg" alt="Timeless album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Timeless</div>
            <div class="song-artist">Hustinder</div>
          </div>
          <div class="song-album">Timeless</div>
          <div class="song-duration">4:02</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/byanymeans.mp3">
          <div class="song-number">4</div>
          <div class="song-artwork">
            <img src="./images/byanymeans.jpg" alt="By any means album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">By Any Means</div>
            <div class="song-artist">Sukha</div>
          </div>
          <div class="song-album">By any means</div>
          <div class="song-duration">3:56</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>
      </div>
    </section>

    <!-- Hindi Songs Section -->
    <section class="section">
      <h2> Hindi Songs</h2>
      <div class="song-list">
        <div class="song-item" data-src="audio/badtameezdil.mp3">
          <div class="song-number">1</div>
          <div class="song-artwork">
            <img src="./images/yjhd.jpg" alt="Badtameez Dil album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Badtameez Dil</div>
            <div class="song-artist">Benny Dayal</div>
          </div>
          <div class="song-album">Yeh Jawaani Hai Deewani</div>
          <div class="song-duration">4:32</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/tumsehi.mp3">
          <div class="song-number">2</div>
          <div class="song-artwork">
            <img src="./images/jabwemet2.jpg" alt="Jab We Met album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Tum Se Hi</div>
            <div class="song-artist">Mohit Chauhan</div>
          </div>
          <div class="song-album">Jab We Met</div>
          <div class="song-duration">5:12</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/kunfayakun.mp3">
          <div class="song-number">3</div>
          <div class="song-artwork">
            <img src="./images/rockstar.jpg" alt="Rockstar album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Kun Faya Kun</div>
            <div class="song-artist">A.R. Rahman</div>
          </div>
          <div class="song-album">Rockstar</div>
          <div class="song-duration">7:08</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

      
      </div>
    </section>

    <!-- English Songs Section -->
    <section class="section">
      <h2> English Songs</h2>
      <div class="song-list">
        <div class="song-item" data-src="audio/diewithasmile.mp3">
          <div class="song-number">1</div>
          <div class="song-artwork">
            <img src="./images/diewithasmile.jpg" alt="Die With A Smile album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Die With A Smile</div>
            <div class="song-artist">Lady Gaga & Bruno Mars</div>
          </div>
          <div class="song-album">Die With A Smile</div>
          <div class="song-duration">4:11</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="song-item" data-src="audio/perfect.mp3">
          <div class="song-number">2</div>
          <div class="song-artwork">
            <img src="./images/play.png" alt="Perfect album cover"/>
          </div>
          <div class="song-info">
            <div class="song-title">Perfect</div>
            <div class="song-artist">Ed Sheeran</div>
          </div>
          <div class="song-album">÷ (Divide)</div>
          <div class="song-duration">4:23</div>
          <button class="song-play-btn">
            <svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        
    
      </div>
    </section>

   
    

  </main>

  <footer>
    <div class="container footer-grid">
      <div class="footer-links">
        <a href="#">About</a>
        <a href="#">Help</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms</a>
      </div>
      <div class="social" aria-label="Social media">
        <a href="#" aria-label="Twitter">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 4h3l5 7l5-7h3l-7.5 10L20 20h-3l-5-7l-5 7H4l7.5-10z"/></svg>
        </a>
        <a href="#" aria-label="Instagram">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm5 3a5 5 0 1 1 0 10a5 5 0 0 1 0-10m0 2.2A2.8 2.8 0 1 0 14.8 12A2.8 2.8 0 0 0 12 9.2M18 6.5a1 1 0 1 1-1 1a1 1 0 0 1 1-1"/></svg>
        </a>
        <a href="#" aria-label="YouTube">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M10 15V9l5 3m8-6.5v9A3.5 3.5 0 0 1 19.5 18h-15A3.5 3.5 0 0 1 1 14.5v-9A3.5 3.5 0 0 1 4.5 2h15A3.5 3.5 0 0 1 23 5.5"/></svg>
        </a>
      </div>
    </div>
  </footer>

  <!-- Fixed Bottom Player Bar -->
  <div class="bottom-player" id="bottomPlayer" style="display: none;">
    <div class="bottom-player-inner">
      <!-- Song Info -->
      <div class="bottom-player-info">
        <div class="bottom-player-artwork">
          <img src="./images/cat.png" alt="Current song" id="playerArtwork">
        </div>
        <div class="bottom-player-text">
          <div class="bottom-player-title" id="playerTitle">Select a song</div>
          <div class="bottom-player-artist" id="playerArtist">—</div>
        </div>
      </div>

      <!-- Controls -->
      <div class="bottom-player-controls">
        <button class="player-control-btn" id="prevBtn">
          <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M6 6h2v12H6zM20 6v12L9 12z"/></svg>
        </button>
        <button class="player-control-btn player-control-play" id="playPauseBtn">
          <svg width="20" height="20" viewBox="0 0 24 24" id="playIcon"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
          <svg width="18" height="18" viewBox="0 0 24 24" id="pauseIcon" style="display: none;"><path fill="currentColor" d="M6 6h2v12H6zM16 6h2v12h-2z"/></svg>
        </button>
        <button class="player-control-btn" id="nextBtn">
          <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M16 6h2v12h-2zM4 6v12l11-6z"/></svg>
        </button>
      </div>

      <!-- Progress -->
      <div class="bottom-player-progress">
        <span class="progress-time" id="currentTime">0:00</span>
        <input type="range" id="progressSlider" min="0" max="100" value="0" class="progress-slider">
        <span class="progress-time" id="totalTime">0:00</span>
        
        <!-- Like and Remove buttons -->
        <div class="player-actions">
          <button class="player-action-btn" id="likeBtn" title="Like this song">
            <svg width="18" height="18" viewBox="0 0 24 24" id="likeIconEmpty">
              <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" stroke="currentColor" stroke-width="1.5" fill="none"/>
            </svg>
            <svg width="18" height="18" viewBox="0 0 24 24" id="likeIconFilled" style="display: none;">
              <path fill="#ff4757" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </button>
          <button class="player-action-btn" id="removeBtn" title="Stop playback">
            <svg width="18" height="18" viewBox="0 0 24 24">
              <path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Music API Integration -->
  <script src="music-api.js"></script>

  <style>
    /* Bottom Player Styles */
    .bottom-player{
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--surface);
      box-shadow: 0 -8px 24px var(--shadow-dark), 0 -8px 24px rgba(0,0,0,.05);
      border-top: 1px solid color-mix(in srgb, var(--bg) 70%, #aab7d8);
      z-index: 100;
      padding: 12px 20px;
    }

    .bottom-player-inner{
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 20px;
      align-items: center;
    }

    .bottom-player-info{
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 0;
    }

    .bottom-player-artwork{
      width: 48px;
      height: 48px;
      border-radius: 8px;
      overflow: hidden;
      flex-shrink: 0;
    }

    .bottom-player-artwork img{
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .bottom-player-text{
      min-width: 0;
      flex: 1;
    }

    .bottom-player-title{
      font-weight: 600;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .bottom-player-artist{
      font-size: 12px;
      opacity: .7;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .bottom-player-controls{
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
    }

    .player-control-btn{
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--surface);
      box-shadow: 6px 6px 12px var(--shadow-dark), -6px -6px 12px var(--shadow-light);
      border: 0;
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: all .2s ease;
    }

    .player-control-btn:hover{
      transform: translateY(-2px);
      box-shadow: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
    }

    .player-control-btn:active{
      transform: translateY(0);
      box-shadow: inset 6px 6px 12px var(--shadow-dark), inset -6px -6px 12px var(--shadow-light);
    }

    .player-control-play{
      width: 56px;
      height: 56px;
      background: radial-gradient(120% 120% at 35% 25%, var(--primary) 0%, #5f74ff 60%);
      color: white;
      box-shadow: 8px 8px 18px rgba(110,133,255,.35), -8px -8px 18px var(--shadow-light);
    }

    .bottom-player-progress{
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .progress-time{
      font-size: 12px;
      opacity: .7;
      min-width: 40px;
      text-align: center;
    }

    .progress-slider{
      -webkit-appearance: none;
      appearance: none;
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: var(--surface);
      box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
      outline: none;
      cursor: pointer;
    }

    .progress-slider::-webkit-slider-thumb{
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: radial-gradient(120% 120% at 35% 25%, var(--primary) 0%, #5f74ff 60%);
      box-shadow: 4px 4px 8px rgba(110,133,255,.35), -4px -4px 8px var(--shadow-light);
      border: 2px solid #fff;
      cursor: pointer;
    }

    .progress-slider::-moz-range-thumb{
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: radial-gradient(120% 120% at 35% 25%, var(--primary) 0%, #5f74ff 60%);
      box-shadow: 4px 4px 8px rgba(110,133,255,.35), -4px -4px 8px var(--shadow-light);
      border: 2px solid #fff;
      cursor: pointer;
    }

    /* Player action buttons (like/remove) */
    .player-actions{
      display: flex;
      gap: 8px;
      margin-left: 16px;
    }

    .player-action-btn{
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 0;
      background: var(--surface);
      box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light);
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: all .2s ease;
    }

    .player-action-btn:hover{
      transform: scale(1.05);
    }

    .player-action-btn:active{
      box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
      transform: scale(0.95);
    }

    .player-action-btn.liked{
      background: color-mix(in srgb, #ff4757 15%, var(--surface));
    }

    /* Currently playing indicator */
    .song-item.playing{
      background: color-mix(in srgb, var(--primary) 12%, var(--surface));
      border-left: 3px solid var(--primary);
      padding-left: 17px;
    }

    .song-item.playing .song-play-btn{
      opacity: 1;
      transform: scale(1);
    }

    /* Add padding to body when player is visible */
    body.player-active{
      padding-bottom: 100px;
    }

    @media (max-width: 768px) {
      .bottom-player-inner{
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .bottom-player-progress{
        order: -1;
      }

      .progress-time{
        min-width: 35px;
        font-size: 11px;
      }
    }
  </style>

  <script>
    (function(){
  // Helper functions
  function qs(sel){ return document.querySelector(sel); }
  function qsa(sel){ return Array.from(document.querySelectorAll(sel)); }

  const DIACRITICS_REGEX = /[\u0300-\u036f]/g;
  const SONG_CATALOG_STORAGE_KEY = 'catifyy_song_catalog';

      function normalizeText(str){
        if(!str) return '';
        try{
          return str.toString().toLowerCase().normalize('NFD').replace(DIACRITICS_REGEX, '');
        }catch(e){
          return str.toString().toLowerCase();
        }
      }

      function escapeHtml(str){
        if(str == null) return '';
        return str.toString().replace(/[&<>"']/g, ch => ({
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;'
        })[ch] || ch);
      }

      // Player elements
      const bottomPlayer = qs('#bottomPlayer');
      const playerArtwork = qs('#playerArtwork');
      const playerTitle = qs('#playerTitle');
      const playerArtist = qs('#playerArtist');
      const playPauseBtn = qs('#playPauseBtn');
      const playIcon = qs('#playIcon');
      const pauseIcon = qs('#pauseIcon');
      const prevBtn = qs('#prevBtn');
      const nextBtn = qs('#nextBtn');
      const progressSlider = qs('#progressSlider');
      const currentTimeEl = qs('#currentTime');
      const totalTimeEl = qs('#totalTime');
      const likeBtn = qs('#likeBtn');
      const likeIconEmpty = qs('#likeIconEmpty');
      const likeIconFilled = qs('#likeIconFilled');
      const removeBtn = qs('#removeBtn');

      // LocalStorage for liked songs
      function getLikedSongs(){
        const liked = localStorage.getItem('catifyy_liked_songs');
        return liked ? JSON.parse(liked) : [];
      }

      function saveLikedSongs(likedArray){
        localStorage.setItem('catifyy_liked_songs', JSON.stringify(likedArray));
      }

      function isSongLiked(song){
        const liked = getLikedSongs();
        return liked.some(s => s.title === song.title && s.artist === song.artist);
      }

      function toggleLike(song){
        let liked = getLikedSongs();
        const index = liked.findIndex(s => s.title === song.title && s.artist === song.artist);
        
        if(index >= 0){
          // Unlike
          liked.splice(index, 1);
          console.log('❌ Removed from likes:', song.title);
        } else {
          // Like
          liked.push({
            title: song.title,
            artist: song.artist,
            album: song.album,
            artwork: song.artwork,
            src: song.src,
            likedAt: new Date().toISOString()
          });
          console.log('❤️ Added to likes:', song.title);
        }
        
        saveLikedSongs(liked);
        updateLikeButton();
      }

      function updateLikeButton(){
        if(currentIndex < 0 || currentIndex >= songs.length) return;
        const song = songs[currentIndex];
        const isLiked = isSongLiked(song);
        
        if(isLiked){
          likeIconEmpty.style.display = 'none';
          likeIconFilled.style.display = 'block';
          likeBtn.classList.add('liked');
        } else {
          likeIconEmpty.style.display = 'block';
          likeIconFilled.style.display = 'none';
          likeBtn.classList.remove('liked');
        }
      }

      // Audio element
      const audio = new Audio();
      audio.preload = 'metadata';

      // Build songs list from page
      const songs = [];
      const songIndexById = new Map();
      qsa('.song-item').forEach((item, idx) => {
        const artwork = item.querySelector('.song-artwork img');
        const title = item.querySelector('.song-title');
        const artist = item.querySelector('.song-artist');
        const album = item.querySelector('.song-album');
        const anchorId = item.id || `song-${idx + 1}`;
        if(!item.id) item.id = anchorId;
        const sectionTitle = (() => {
          const section = item.closest('section');
          const heading = section ? section.querySelector('h2') : null;
          return heading ? heading.textContent.trim() : '';
        })();
        
        songs.push({
          el: item,
          title: title ? title.textContent.trim() : 'Unknown',
          artist: artist ? artist.textContent.trim() : '',
          album: album ? album.textContent.trim() : '',
          artwork: artwork ? artwork.src : '',
          src: item.dataset.src || null,
          section: sectionTitle,
          anchorId,
          searchIndex: normalizeText([
            title ? title.textContent : '',
            artist ? artist.textContent : '',
            album ? album.textContent : '',
            sectionTitle
          ].join(' '))
        });
        songIndexById.set(anchorId, songs.length - 1);
      });

      const songCatalog = songs.map(song => ({
        id: song.anchorId,
        title: song.title,
        artist: song.artist,
        album: song.album,
        section: song.section,
        query: song.searchIndex
      }));

      function persistSongCatalog(){
        try{
          localStorage.setItem(SONG_CATALOG_STORAGE_KEY, JSON.stringify({
            updated: Date.now(),
            items: songCatalog
          }));
        } catch(e){
          console.warn('Failed to persist song catalog', e);
        }
      }

      persistSongCatalog();

  let lastMatches = songs.slice();
  let lastQuery = '';

      const heroSection = qs('.songs-hero');
      let searchStatusEl = qs('#songSearchStatus');
      if(!searchStatusEl){
        searchStatusEl = document.createElement('div');
        searchStatusEl.id = 'songSearchStatus';
        if(heroSection && heroSection.parentNode){
          heroSection.parentNode.insertBefore(searchStatusEl, heroSection.nextElementSibling);
        } else {
          const main = qs('main');
          if(main){
            main.insertBefore(searchStatusEl, main.firstChild);
          }
        }
      }

      let searchReferenceEl = qs('#songSearchReference');
      if(!searchReferenceEl){
        searchReferenceEl = document.createElement('div');
        searchReferenceEl.id = 'songSearchReference';
        if(searchStatusEl && searchStatusEl.parentNode){
          searchStatusEl.parentNode.insertBefore(searchReferenceEl, searchStatusEl.nextSibling);
        }
      }

      function updateSectionVisibility(){
        qsa('section.section').forEach(section => {
          const items = Array.from(section.querySelectorAll('.song-item'));
          if(!items.length) return;
          const hasVisible = items.some(item => item.style.display !== 'none');
          section.style.display = hasVisible ? '' : 'none';
        });
      }

      function updateSearchStatus(query, count){
        if(!searchStatusEl) return;
        if(!query){
          searchStatusEl.style.display = 'none';
          searchStatusEl.removeAttribute('data-state');
          searchStatusEl.textContent = '';
          return;
        }

        const safeQuery = escapeHtml(query.trim());
        searchStatusEl.style.display = 'block';

        if(count > 0){
          searchStatusEl.dataset.state = 'results';
          searchStatusEl.innerHTML = `Showing <strong>${count}</strong> result${count === 1 ? '' : 's'} for "<span>${safeQuery}</span>"`;
        } else {
          searchStatusEl.dataset.state = 'empty';
          searchStatusEl.innerHTML = `No songs found for "<span>${safeQuery}</span>".`;
        }
      }

      function clearSearchStatus(){
        updateSearchStatus('', songs.length);
      }

      function clearSearchReferences(){
        if(!searchReferenceEl) return;
        searchReferenceEl.style.display = 'none';
        searchReferenceEl.innerHTML = '';
      }

      function updateSearchReferences(query, matches){
        if(!searchReferenceEl) return;
        if(!query || !matches || !matches.length){
          clearSearchReferences();
          return;
        }

        searchReferenceEl.style.display = 'block';

        const fragment = document.createDocumentFragment();
        const list = document.createElement('ul');

        matches.slice(0, 6).forEach((song, idx) => {
          const li = document.createElement('li');
          const link = document.createElement('a');
          link.href = song.anchorId ? `#${song.anchorId}` : '#';
          link.className = 'result-meta';
          link.setAttribute('aria-label', `${song.title} by ${song.artist}`);

          const metaParts = [];
          if(song.artist) metaParts.push(escapeHtml(song.artist));
          if(song.album) metaParts.push(`Album · ${escapeHtml(song.album)}`);
          if(song.section) metaParts.push(escapeHtml(song.section));

          link.innerHTML = `
            <div class="result-title">${escapeHtml(song.title)}</div>
            <div class="result-artist">${metaParts.join(' • ') || 'Unknown Artist'}</div>
          `;

          li.appendChild(Object.assign(document.createElement('div'), {
            className: 'result-index',
            textContent: String(idx + 1)
          }));
          li.appendChild(link);
          list.appendChild(li);
        });

        fragment.appendChild(list);
        searchReferenceEl.innerHTML = '';
        searchReferenceEl.appendChild(fragment);
      }

      function applySongFilter(query){
        const trimmed = (query || '').trim();
        if(!trimmed){
          return clearSongFilter();
        }

        const normalized = normalizeText(trimmed);
        let visibleCount = 0;
        const matches = [];

        songs.forEach(song => {
          const matchesQuery = song.searchIndex.includes(normalized);
          if(song.el){
            song.el.style.display = matchesQuery ? '' : 'none';
          }
          if(matchesQuery){
            visibleCount += 1;
            matches.push(song);
          }
        });

        updateSectionVisibility();
        updateSearchStatus(trimmed, visibleCount);
        updateSearchReferences(trimmed, matches);
  lastMatches = matches;
  lastQuery = trimmed;
        return visibleCount;
      }

      function clearSongFilter(){
        songs.forEach(song => {
          if(song.el) song.el.style.display = '';
        });
        qsa('section.section').forEach(section => {
          const items = Array.from(section.querySelectorAll('.song-item'));
          if(!items.length) return;
          section.style.display = '';
        });
        clearSearchStatus();
        clearSearchReferences();
  lastMatches = songs.slice();
  lastQuery = '';
        return songs.length;
      }

      function getLastMatches(){
        return lastMatches.slice();
      }

      function playSongByAnchor(anchorId, autoPlay = true){
        if(!anchorId) return false;
        const idx = songIndexById.get(anchorId);
        if(typeof idx === 'number' && idx >= 0){
          loadSong(idx, autoPlay);
          return true;
        }
        return false;
      }

      function playFirstMatch(autoPlay = true){
        if(!lastMatches.length) return false;
        const target = lastMatches[0];
        return playSongByAnchor(target.anchorId, autoPlay);
      }

      let currentIndex = -1;
      let isPlaying = false;

      // Format time helper
      function formatTime(seconds){
        seconds = Math.floor(seconds);
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return mins + ':' + (secs < 10 ? '0' + secs : secs);
      }

      // Update UI
      function updatePlayerUI(){
        if(currentIndex < 0 || currentIndex >= songs.length) return;
        const song = songs[currentIndex];
        
        playerArtwork.src = song.artwork;
        playerTitle.textContent = song.title;
        playerArtist.textContent = song.artist;

        // Mark playing item
        songs.forEach((s, i) => {
          if(s.el) s.el.classList.toggle('playing', i === currentIndex);
        });

        // Update button icons in song list
        qsa('.song-play-btn').forEach((btn, i) => {
          if(i === currentIndex && isPlaying){
            btn.innerHTML = '<svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M6 6h2v12H6zM16 6h2v12h-2z"/></svg>';
          } else {
            btn.innerHTML = '<svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>';
          }
        });

        // Update like button
        updateLikeButton();
      }

      function updatePlayPauseIcon(){
        if(isPlaying){
          playIcon.style.display = 'none';
          pauseIcon.style.display = 'block';
        } else {
          playIcon.style.display = 'block';
          pauseIcon.style.display = 'none';
        }
      }

      function updateProgress(){
        if(audio.duration && isFinite(audio.duration)){
          const percent = (audio.currentTime / audio.duration) * 100;
          progressSlider.value = percent;
          currentTimeEl.textContent = formatTime(audio.currentTime);
          totalTimeEl.textContent = formatTime(audio.duration);
        }
      }

      // Initialize Music API
      const musicAPI = new MusicAPI();

      // Try to load audio candidates
      async function tryLoadAudio(song){
        // First try API search
        try{
          console.log('Searching API for:', song.title, song.artist);
          const result = await musicAPI.searchSong(song.title, song.artist);
          
          if(result && result.preview_url){
            audio.src = result.preview_url;
            
            // Update artwork if API provides better quality
            if(result.album_cover){
              playerArtwork.src = result.album_cover;
              song.artwork = result.album_cover;
            }
            
            const loaded = await new Promise((resolve) => {
              let done = false;
              const onLoad = () => { if(done) return; done = true; cleanup(); resolve(true); };
              const onError = () => { if(done) return; done = true; cleanup(); resolve(false); };
              const cleanup = () => {
                audio.removeEventListener('loadedmetadata', onLoad);
                audio.removeEventListener('error', onError);
              };
              audio.addEventListener('loadedmetadata', onLoad);
              audio.addEventListener('error', onError);
              audio.load();
              setTimeout(() => { if(!done){ done = true; cleanup(); resolve(false); } }, 2000);
            });
            
            if(loaded){
              console.log('✓ Loaded from API:', result.title);
              return true;
            }
          }
        } catch(e){
          console.log('API search failed:', e.message);
        }

        // Fallback to local files
        const candidates = [];
        
        // Try explicit src
        if(song.src) candidates.push(song.src);
        
        // Try to derive from artwork
        if(song.artwork){
          const url = song.artwork.split('?')[0].split('#')[0];
          const match = url.match(/(^.*\/)?([^\/]+?)\.(jpg|jpeg|png|webp|avif)$/i);
          if(match){
            const dir = match[1] || '';
            const name = match[2].toLowerCase().replace(/[^a-z0-9]+/g, '');
            candidates.push(dir + name + '.mp3');
            candidates.push(dir + name + '.m4a');
            candidates.push('audio/' + name + '.mp3');
          }
        }

        // Try loading local files
        for(const candidate of candidates){
          try{
            audio.src = candidate;
            const loaded = await new Promise((resolve) => {
              let done = false;
              const onLoad = () => { if(done) return; done = true; cleanup(); resolve(true); };
              const onError = () => { if(done) return; done = true; cleanup(); resolve(false); };
              const cleanup = () => {
                audio.removeEventListener('loadedmetadata', onLoad);
                audio.removeEventListener('error', onError);
              };
              audio.addEventListener('loadedmetadata', onLoad);
              audio.addEventListener('error', onError);
              audio.load();
              setTimeout(() => { if(!done){ done = true; cleanup(); resolve(false); } }, 1500);
            });
            if(loaded){
              console.log('✓ Loaded local file:', candidate);
              return true;
            }
          } catch(e){}
        }
        
        console.log('✗ No audio source found for:', song.title);
        return false;
      }

      // Load and play song
      async function loadSong(index, autoPlay = false){
        if(index < 0 || index >= songs.length) return;
        
        currentIndex = index;
        const song = songs[currentIndex];
        
        updatePlayerUI();
        bottomPlayer.style.display = 'block';
        document.body.classList.add('player-active');

        const loaded = await tryLoadAudio(song);
        
        if(loaded && autoPlay){
          try{
            await audio.play();
            isPlaying = true;
            updatePlayPauseIcon();
            updatePlayerUI();
          } catch(e){
            console.log('Autoplay blocked');
          }
        } else if(!loaded){
          console.log('No audio file found for:', song.title);
        }
      }

      // Play/Pause
      async function togglePlayPause(){
        if(currentIndex < 0){
          loadSong(0, true);
          return;
        }

        if(isPlaying){
          audio.pause();
          isPlaying = false;
        } else {
          try{
            await audio.play();
            isPlaying = true;
          } catch(e){
            console.log('Play error:', e);
          }
        }
        updatePlayPauseIcon();
        updatePlayerUI();
      }

      // Next/Prev
      function nextSong(){
        const nextIndex = (currentIndex + 1) % songs.length;
        loadSong(nextIndex, true);
      }

      function prevSong(){
        const prevIndex = (currentIndex - 1 + songs.length) % songs.length;
        loadSong(prevIndex, true);
      }

      // Event listeners
      audio.addEventListener('timeupdate', updateProgress);
      audio.addEventListener('ended', nextSong);
      audio.addEventListener('play', () => { isPlaying = true; updatePlayPauseIcon(); updatePlayerUI(); });
      audio.addEventListener('pause', () => { isPlaying = false; updatePlayPauseIcon(); updatePlayerUI(); });

      playPauseBtn.addEventListener('click', togglePlayPause);
      prevBtn.addEventListener('click', prevSong);
      nextBtn.addEventListener('click', nextSong);

      // Like button
      likeBtn.addEventListener('click', () => {
        if(currentIndex >= 0 && currentIndex < songs.length){
          const song = songs[currentIndex];
          toggleLike(song);
        }
      });

      // Remove button - Stop playback
      removeBtn.addEventListener('click', () => {
        // Stop the audio
        audio.pause();
        audio.currentTime = 0;
        isPlaying = false;
        
        // Hide player
        bottomPlayer.style.display = 'none';
        document.body.classList.remove('player-active');
        
        // Clear playing indicators
        songs.forEach(s => {
          if(s.el) s.el.classList.remove('playing');
        });
        
        // Reset play buttons
        qsa('.song-play-btn').forEach(btn => {
          btn.innerHTML = '<svg width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>';
        });
        
        currentIndex = -1;
        updatePlayPauseIcon();
        
        console.log('⏹️ Playback stopped');
      });

      progressSlider.addEventListener('input', () => {
        if(audio.duration && isFinite(audio.duration)){
          audio.currentTime = (progressSlider.value / 100) * audio.duration;
        }
      });

      // Make song items clickable
      songs.forEach((song, index) => {
        if(!song.el) return;
        
        // Click on song item
        song.el.addEventListener('click', (e) => {
          if(e.target.closest('.song-play-btn')) return; // handled below
          
          if(currentIndex === index){
            togglePlayPause();
          } else {
            loadSong(index, true);
          }
        });

        // Click on play button
        const playBtn = song.el.querySelector('.song-play-btn');
        if(playBtn){
          playBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if(currentIndex === index){
              togglePlayPause();
            } else {
              loadSong(index, true);
            }
          });
        }
      });

      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        if(e.target.tagName === 'INPUT') return;
        
        if(e.code === 'Space'){
          e.preventDefault();
          togglePlayPause();
        } else if(e.code === 'ArrowRight'){
          e.preventDefault();
          nextSong();
        } else if(e.code === 'ArrowLeft'){
          e.preventDefault();
          prevSong();
        }
      });

      // Initialize search state on load
      clearSongFilter();

      // Expose for debugging
      window.songSearch = {
        filter: applySongFilter,
        clear: clearSongFilter,
        updateStatus: updateSearchStatus,
        data: songs,
        exportCatalog: () => songCatalog.slice(),
        catalog: songCatalog,
        saveCatalog: persistSongCatalog,
        getMatches: getLastMatches,
        getLastQuery: () => lastQuery,
        playFirstMatch,
        playById: playSongByAnchor
      };

      window.musicPlayer = { songs, audio, loadSong, togglePlayPause, nextSong, prevSong };
    })();
  </script>

  <!-- Theme script -->
  <script src="theme.js"></script>
</body>
</html>
